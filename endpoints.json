{
  "endpoints": {
    "/": {
      "GET": {
        "status": "none",
        "description": "Returns a JSON file detailing information about the API and it's various endpoints."
      }
    },
    "/backup": {
      "/:key": {
        "status": "none - with caveats.",
        "description": "Returns a full backup of the server in JSON format. Requires a key that can only be generated by an administrator which expires after 30 seconds."
      }
    },
    "/auth": {
      "POST": {
        "/register": {
          "status": "any",
          "description": "Registers an account for a user. Body required.",
          "body": {
            "username": "username",
            "password": "password"
          }
        },
        "/login": {
          "status": "any",
          "description": "Signs a user in. Returns user info including a JWT token. Body required.",
          "body": {
            "username": "username",
            "password": "password"
          }
        }
      }
    },
    "/players": {
      "GET": {
        "/": {
          "status": "validated",
          "description": "Returns a list of players. Can be passed a Search query. Returns an object with matching users, the count of matching users and - if applicable - an exact match.",
          "example_query": "/players?search=name&limit=5&p=2"
        },
        "/:player": {
          "status": "validated",
          "description": "Returns information to the player specified in the endpoint.",
          "example_response": {
            "player": {
              "player_name": "reboot",
              "type": "unknown",
              "p_created_at": "2022-02-22T19:30:21.911Z",
              "p_created_by": null,
              "aliases": null
            },
            "notes": [],
            "tendencies": []
          }
        }
      },
      "POST": {
        "/": {
          "status": "validated",
          "description": "Adds a player to the database.",
          "example_body": { "player_name": "PlayerToAdd" }
        }
      },
      "PATCH": {
        "/:player/type": {
          "status": "validated",
          "description": "Amends the 'type' attribute of a player",
          "example_body": { "type": "Updated Type" }
        }
      }
    },
    "/notes": {
      "GET": {
        "/": {
          "status": "validated",
          "description": "Returns a list of all notes"
        },
        "/:player": {
          "status": "validated",
          "description": "Returns all notes for the player specified in the parmater",
          "example_response": {
            "notes": [
              {
                "note_id": 122,
                "player_name": "example_user",
                "n_created_at": "2022-02-22T19:11:17.461Z",
                "note": "Example note",
                "n_created_by": "admin"
              },
              {
                "note_id": 831,
                "player_name": "example_user",
                "n_created_at": "2022-02-22T19:00:46.881Z",
                "note": "Example note",
                "n_created_by": "admin"
              }
            ]
          }
        }
      },
      "DELETE": {
        "/:id": {
          "status": "validated",
          "description": "Deletes the note with the specified id."
        }
      },
      "POST": {
        "/:player": {
          "status": "validated",
          "description": "Adds a new note to the player specified in the endpoint.",
          "example_body": {
            "note": "This is an example note that is being added."
          }
        }
      }
    },
    "/tendencies": {
      "DELETE": {
        "/:id": {
          "status": "validated",
          "description": "Deletes a tendency at the specified ID."
        }
      },
      "POST": {
        "/:player": {
          "status": "validated",
          "description": "Adds a new tendency to the player specified in the endpoint.",
          "example_body": {
            "tendency": "This is an example tendency."
          }
        }
      }
    },
    "/admin": {
      "GET": {
        "/users": {
          "status": "administrator",
          "description": "Returns a list of all registered users and their status.",
          "example_response": {
            "users": [
              {
                "user_id": 1,
                "username": "admin",
                "admin": true,
                "validated": true,
                "u_created_at": "2022-02-23T08:26:25.059Z"
              },
              {
                "user_id": 2,
                "username": "first_user",
                "admin": false,
                "validated": true,
                "u_created_at": "2022-02-23T07:27:39.854Z"
              }
            ]
          }
        },
        "/recent": {
          "status": "administrator",
          "description": "Returns a list of current server information. Including the last 5 created notes and tendencies as well as total user, note, player and tendency counts.",
          "example_response": {
            "recent": {
              "notes": [
                {
                  "note_id": 233,
                  "player_name": "newest_user",
                  "n_created_at": "2022-02-22T23:59:06.648Z",
                  "note": "new note",
                  "n_created_by": "admim"
                }
              ],
              "tendencies": [
                {
                  "tendency_id": 13,
                  "player_name": "newest_user",
                  "tendency": "new tendency",
                  "t_created_at": "2022-02-22T23:41:08.187Z",
                  "t_created_by": "admin"
                }
              ],
              "note_count": {
                "count": "977"
              },
              "tendency_count": {
                "count": "223"
              },
              "player_count": {
                "count": "854"
              },
              "user_count": {
                "count": "11"
              }
            }
          }
        },
        "/generateKey": {
          "status": "administrator",
          "decription": "Generates a key with a 30 second expiry date which can be used to download a total server JSON backup at the endpoint /backup/:key. Once the key is expired it will no longer work.",
          "example_response": {
            "key": {
              "key_id": 1,
              "key": "random_key_will_be_here",
              "expiry_date": "2022-02-23T09:14:39.953Z"
            }
          }
        }
      }
    }
  }
}
